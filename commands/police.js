module.exports = {
	name: 'police',
	description: 'shitty thing',
	execute(message, args) {
        const Discord = require('discord.js');
        const msg = message
        const warn = require('../warn.json'); 
        const warns = require('../warn.json'); 
        var warnUser = msg.guild.member(msg.mentions.users.first() || msg.guild.members.get(args[1]))
        const fs = require('fs');

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

        if (args[0] === 'add') {


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        if (!warnUser) return
        if (!message.member.permissions.has("MANAGE_MESSAGES"))  {



 const error = new Discord.MessageEmbed()
            .setColor('#0099ff')
            .setAuthor(`${message.author.username}`, `${message.author.displayAvatarURL({ dynamic: true })}`)
            .setTitle('Ошибка')
            .setDescription('Во время исполнения произошла ошибка.\n Недостаточно прав')

            message.channel.send(error)
            return

        } 

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


if (!message.author.bot) {
     
      
      if (!warn[warnUser.id]) warn[warnUser.id] = { 
        warns: args[2],
        reason: args.slice(3).join(' '),
        guild: message.guild.id
       };
   
      else  {
      delete warn[warnUser.id]; 
      warn[warnUser.id] = {
        warns: args[2],
        reason: reason = args.slice(3).join(' '),
        guild: message.guild.id
      }
    }
     
      try {
        fs.writeFileSync('../warn.json', JSON.stringify(warn));
      } catch(err) {
        console.error(err);
      }
      message.react("✅")
    }
  
        }

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

else if (args[0] === 'remove') {

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
if (!warnUser) return
        if (!message.member.permissions.has("MANAGE_MESSAGES"))  {



 const error = new Discord.MessageEmbed()
            .setColor('#0099ff')
            .setAuthor(`${message.author.username}`, `${message.author.displayAvatarURL({ dynamic: true })}`)
            .setTitle('Ошибка')
            .setDescription('Во время исполнения произошла ошибка.\n Недостаточно прав')

            message.channel.send(error)
            return

        } 

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


if (!message.author.bot) {
       
        
    if (!warn[warnUser.id]) return
 
    else { 
      delete warn[warnUser.id]
    }

   
    try {
      fs.writeFileSync('../warn.json', JSON.stringify(warn));
    } catch(err) {
      console.error(err);
    }
    message.react("✅")
  }




    }

	},
};